{"$schema":"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"subnetName":{"type":"string","defaultValue":"portalSN"},"virtualNetworkName":{"type":"string","defaultValue":"portalVN"},"addressPrefix":{"type":"string","defaultValue":"10.0.3.0/24"},"adminPublicKey":{"type":"secureString"},"useSpot":{"type":"bool","defaultValue":true},"proximityPlacementGroupName":{"type":"string","defaultValue":"portalPPG"},"availabilityZone":{"type":"string","allowedValues":["1","2","3"],"defaultValue":"1"}},"variables":{"nsgId":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkSecurityGroups', 'convergedNSG')]","vnetId":"[resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName'))]","subnetRef":"[concat(variables('vnetId'), '/subnets/', parameters('subnetName'))]"},"resources":[{"name":"excelero.com","type":"Microsoft.Network/privateDnsZones","apiVersion":"2020-01-01","location":"global"},{"name":"[parameters('virtualNetworkName')]","type":"Microsoft.Network/virtualNetworks","properties":{"addressSpace":{"addressPrefixes":["[parameters('addressPrefix')]"]},"subnets":[{"name":"[parameters('subnetName')]","properties":{"addressPrefix":"[parameters('addressPrefix')]"}}]},"apiVersion":"2019-09-01","location":"[resourceGroup().location]"},{"name":"excelero.com/excelero.com-link","type":"Microsoft.Network/privateDnsZones/virtualNetworkLinks","dependsOn":["[resourceId(resourceGroup().name, 'Microsoft.Network/privateDnsZones', 'excelero.com')]","[resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName'))]"],"properties":{"registrationEnabled":true,"virtualNetwork":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName'))]"}},"apiVersion":"2020-01-01","location":"global"},{"name":"nvmeshNSG","type":"Microsoft.Network/networkSecurityGroups","properties":{"securityRules":[{"name":"management","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"4001-4006","priority":1010}},{"name":"managementGUI","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"*","destinationPortRange":"4000","priority":1020}},{"name":"iwarp","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"7914-7978","priority":1030}},{"name":"mongo","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"27017","priority":1040}},{"name":"SSH","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"*","destinationPortRange":"22","priority":1050}},{"name":"zookeeperConnect","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"2181","priority":1060}},{"name":"zookeeperInternal1","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"2888","priority":1070}},{"name":"zookeeperInternal2","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"3888","priority":1080}},{"name":"kafka","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"9092","priority":1090}}]},"apiVersion":"2019-02-01","location":"[resourceGroup().location]"},{"name":"[concat(parameters('virtualNetworkName'), '/', parameters('subnetName'))]","type":"Microsoft.Network/virtualNetworks/subnets","dependsOn":["[parameters('virtualNetworkName')]"],"properties":{"addressPrefix":"[parameters('addressPrefix')]"},"apiVersion":"2019-06-01","location":"[resourceGroup().location]"},{"name":"[parameters('proximityPlacementGroupName')]","type":"Microsoft.Compute/proximityPlacementGroups","apiVersion":"2018-04-01","location":"[resourceGroup().location]"},{"name":"nvmesh1","type":"Microsoft.Compute/virtualMachines","dependsOn":["[resourceId('Microsoft.Network/privateDnsZones/virtualNetworkLinks/', 'excelero.com', 'excelero.com-link')]","[concat('Microsoft.Compute/proximityPlacementGroups/', parameters('proximityPlacementGroupName'))]","[concat('nvmesh1', 'NIC1')]"],"properties":{"hardwareProfile":{"vmSize":"Standard_L8s_v2"},"storageProfile":{"osDisk":{"createOption":"fromImage","managedDisk":{"storageAccountType":"StandardSSD_LRS"}},"imageReference":{"publisher":"excelero1608461290726","offer":"nvmesh-azure-205-001","sku":"nvmesh-plan-0001","version":"1.0.5"}},"networkProfile":{"networkInterfaces":[{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkInterfaces', concat('nvmesh1', 'NIC1'))]","primary":true}]},"osProfile":{"computerName":"nvmesh1","adminUsername":"excelero","linuxConfiguration":{"disablePasswordAuthentication":true,"ssh":{"publicKeys":[{"path":"[concat('/home/', 'excelero', '/.ssh/authorized_keys')]","keyData":"[parameters('adminPublicKey')]"}]}}},"diagnosticsProfile":{"bootDiagnostics":{"enabled":true}},"priority":"[if(parameters('useSpot'), 'Spot', json('null'))]","evictionPolicy":"[if(parameters('useSpot'), 'Deallocate', json('null'))]","billingProfile":{"maxPrice":"[if(parameters('useSpot'), -1, json('null'))]"},"proximityPlacementGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Compute/proximityPlacementGroups', parameters('proximityPlacementGroupName'))]"}},"apiVersion":"2020-06-01","location":"[resourceGroup().location]","plan":{"name":"nvmesh-plan-0001","product":"nvmesh-azure-205-001","publisher":"excelero1608461290726"},"zones":["[parameters('availabilityZone')]"]},{"name":"[concat('nvmesh1', 'NIC1')]","type":"Microsoft.Network/networkInterfaces","dependsOn":["[concat('Microsoft.Network/networkSecurityGroups/', 'nvmeshNSG')]","[concat('Microsoft.Network/virtualNetworks/', parameters('virtualNetworkName'))]","[concat('Microsoft.Network/publicIpAddresses/', concat(concat('nvmesh1', 'NIC1'), 'PublicIP1'))]"],"properties":{"ipConfigurations":[{"name":"ipconfig1","properties":{"subnet":{"id":"[concat(resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName')), '/subnets/', parameters('subnetName'))]"},"privateIPAllocationMethod":"Dynamic","publicIpAddress":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/publicIpAddresses', concat(concat('nvmesh1', 'NIC1'), 'PublicIP1'))]"}}}],"networkSecurityGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkSecurityGroups', 'nvmeshNSG')]"}},"apiVersion":"2018-10-01","location":"[resourceGroup().location]"},{"name":"[concat(concat('nvmesh1', 'NIC1'), 'PublicIP1')]","type":"Microsoft.Network/publicIpAddresses","dependsOn":[],"properties":{"publicIpAllocationMethod":"Dynamic"},"apiVersion":"2019-02-01","location":"[resourceGroup().location]","sku":{"name":"Basic"},"zones":["[parameters('availabilityZone')]"]},{"name":"nvmesh1/config1","type":"Microsoft.Compute/virtualMachines/extensions","dependsOn":["[concat('Microsoft.Compute/virtualMachines/', 'nvmesh1')]"],"properties":{"publisher":"Microsoft.Azure.Extensions","type":"CustomScript","typeHandlerVersion":"2.0","autoUpgradeMinorVersion":true,"settings":{"skipDos2Unix":true,"script":"H4sIADDNvGACA+1a61PbSBL/jP6KiePCCZuR/CCB867ZI9jkXOFVAbYqB6wzlsb2BFmj04wMJJv726/nIVm2MeDcfUjVpVLB0kxPd0/3rx8z9vNnXp9FXp+IkePQW+qjHU+OY+/TiAsZkTH9hFnEpBvyIarvrNccQSXCt0Aa80Sioz8OO6f/qLWiyZiKUc2ltz4NacJdn4/RLFHdEtUfImpYosb9RO9399/v9s6OT7p7p60X15TGJGQTKpCQJJFpfEiFIEMqXuYr2p2Tg+OPh52js975ebfdolvVhr9Vq2H/jU9wrUb7uL9FqnhQI7RWf73tB7QOi/0RRyXNlEVDJDlK0ggJP2GxbCI/5GlwLlkovAGV/gjrAZyqEVeMSmhnB2kjmgWiB4uVAZ3nz9G+WoBIFKCAxiG/KzBz/EAvc26GysY44tgfUf8a+xTUGDCfSArDatdYwEYZj7DP+TWD/WMsyITmr+azxwJX3ipWMTgTB0SSViUVNFF+bZE4/nvRyOsxEeKGJ0GLBGMWVdBIylg0PW9z061vVt3a3+B/o9psVLerHomZBzti0SPKhpwES7XyeSRpBIoxAQoyCRtClcekBvwmUly9gPa9qfEqzvg6YAnCMfJ4LD2AE8CoQIDW1xH4E90OCiZ35fALwnszS5QtJfgN1BvHPAIFBao5yRjhATJbBj9hR3vrXkme48cITxR9CqGzz0IqvA3kgec9cSckHQf207OsHoYblyOaeCoKcXwnRzxqPAiyHPhvu7tHvf0Px0dnnaN2K+IRA3MnxJcQMY7C4p5ymBLIBojEEjGh5EZqBDzRJ/71MIFNabTeECZRnw54QpFM7qyaLAKlw9CB1T1N8eIl+uqs3Yxgz2igoIa8CUm8kPW9IL4eAmYAIoNEOz6AVBPQiRelYYjq6zs19CsKuLO2JkKAONh8LQDzP8ZthgkkqFWYgNrwKaRYhRMY60L51nDhQy+NiFTboZAC4mFCAnD3PWM6hV79isCbEXBdVGhFVku0napr9R2weZ3vd8YVekC3+5esosM3J0cJgA+dm60gg2hHw8+ACeE7lOF8W5G+gwQTs7jh+GkS5lmpz7mEOCWxG9/FxGXcg0SEgQ7e0V9IpAGfZXNKoUAgIiDxDkgaSjShicqhjiZNY0iPFJNQqvQodVHBOFPJS0Wi66ThaBnPD4Mg2PPq7BqZovczBN3bLJF3CJLzNYGIBMtDHNpFGEynzZfQMZ/QqfXyiQW75jNGy0fSjynIttKZl6cXuUy2WYfihAepL3+WutVLnbEgHpMIGpwx8Kr8EPr4UBB+DE1S0wYsFuonwdsC9SkA/1lgfxbYH73A2vzqzRcA1yt/PXx3eNY7ef+uiRdyygbE0zdNtHf8oTNDpAJ9On1+1j04nZnX4acJTNg9HHVjHg256Wn142MV5VxXKrMsgBwSDdgwTYjKFg5kGfTbb53jfbRjmmxD5SoqxzTaB3zYdBBUfgHK6FVNNAAXwBgI2I1jMHYTwi5VIzGRo+YUMoZbP+OqFBKSJ2AxzbJ/UiBnlgwmPvMUik+oaBCiEemHNBMBVdCHonaYm10RSTam/wRfdqMBb5pGQIxIQr0vMMhg0ImoJlTJp4nqW9XaFrxBsxB0490wNLwReo46Kguhqqv/vWo2le0VmfpUMOieTDZ1yoGHN4gEQQLKQGbmyStUaFjCu1cIAKogi0C0m0tCgkrlU9dJ4AirkryyJ+iiXqHLOoKS20SJqDrgE0cn5GQwZyBvo3BemzWdA8C5iRD+YL3db9rPBULjW1+GkFixNXEGkQxL+hUr3bXnYugf6AD6wyEo+wgtBOeE+TnoAMoyFcuIFQjnwbeMVgG6o9XVxrVyCtsxe7GCNfmpiqMl1DrGcmKbGapPrnsqBHMkPhaHXSBHU3KwEcQ6AykqcZFQXRo1NTQhR9i7oW9m4FU2UJ8faNgBb1gyJiycqguafRY2onORFn455CqVxSGAYWVlxiSVvANWlocMes9o2E4gHiBjkFDQZZMq+rSge4VoO7ffgqw5Mfs8GRO5IGBm+Mmsi6FWpB0mBXpovRahZtAAhDnq8xGDr1XgpErFk4CkCB2zspfldNorqKqUgVyG8TRLFXC1Wa3WirCaeW+Yd3UiSLjkPrdHx0V5EfMhK0h0pw4XEaJylAVPpXvyx2bv+OjgY6v0kYpSRe9oDkm2Y9QQurhQHMpfu0fds97Z3sk3dHWlLp4MNxjodY523x502k/jp5ZauOAOqghv7/hov/vu/EOn3TtSV6Cliz9LVxulxXG1CQ/klbxh5UGNnWWgkXxMIEsvme2rPqUHvQlARfRm6vF00SIQfQGzmQfs6XMOcYAvdZgwoFuCU0OT5brXBTIAic6Ghs4ff1f3j0Vw/SB+zeUCixt5azVIJUDJTOAUZYdNpO7VEfZRZeG2kNnH0/Z75WY30wEEI5BfWSXgshYtZE8KOyMY7R10jQyAbEkfhFH5RTZg3v9SG6BvNl8CU/Rvz81iJ2S9gb7WtANwJoNY9RMKR/uH1b4mg2uS21u/Pabzz1PU/8kpqniCmTu32Ds7/Dm4VvdhXTuj8ZPfxJtriOzuILsjEC6JiT+iLk+GnoFf3d1yq+a5V3drDawH1JcBjv2K4N65ELpSsTDlWS1s0rt35RNORFlgQDg/HhV+mELGS7rt1ifdyGIO5WHj4qIZsCGTzaurDZv182/xlNX2spKHvnCu7tbAp912oRHPh62u5VyOiv/ptDe+Y8ESjoX+5k91DddmSetSbeKysH46MR3LGhxjCFNSptMuVPFY3SrRPMPo3sCttYqd5vb2drMBf4zpvoNdvVXsU/9rdo1Wscv9fnYKFwdszGSrVv0OZe4i36x+vcriGQcbkBec209gSeKyoFX1ps9TyNzvUGuXgpQCy6kWQB1RX7YKp4rads1bJCg6HyhmThnF94Z5f6pShRyj0hGGgoJz4QJLjlVCphFE6ez9w/3fCEKMch31p6bXEd6jXJ8XvphXt/3KCGhaost22y/nBurzA42XNuX6PFUXA61StQTVQZzHLX3ccLKic4Euy5YG4VDCERLp3vUZjCvyLHNnfC7LF/mCX2pXwGctz3BSlKB3iHxYqvVWpof5ZAKrfoeHC1S6LCeTEhzG/4WsHK2Svh/Ji9lrW8z0H3WZ4I/GcBL/5fZ/aOdC8xgQCqdonFBVNhZ7Tw2ZKR936bnd5m87vXBSf5xPgS6fffJPEnQJyQ2B7fqHf5gw08sa/ewXc04RNpLHzO/cMnWLNszgk6FnCXjKM4sMiNSVWMa3fDEDIjXFU9n6VIhSFQdGKc1LbQVdaso1rD05fZsWthUTAxRIhcoyyC6hZy1UKpkNzG7ZwFPJyq9ZNDadRRAYD9AEw1lW3avYQ07+m5VgdmLB+6uu/w+JT66zySMAAA==\n"}},"apiVersion":"2015-06-15","location":"[resourceGroup().location]"},{"name":"nvmesh2","type":"Microsoft.Compute/virtualMachines","dependsOn":["[resourceId('Microsoft.Network/privateDnsZones/virtualNetworkLinks/', 'excelero.com', 'excelero.com-link')]","[concat('Microsoft.Compute/proximityPlacementGroups/', parameters('proximityPlacementGroupName'))]","[concat('nvmesh2', 'NIC1')]"],"properties":{"hardwareProfile":{"vmSize":"Standard_L8s_v2"},"storageProfile":{"osDisk":{"createOption":"fromImage","managedDisk":{"storageAccountType":"StandardSSD_LRS"}},"imageReference":{"publisher":"excelero1608461290726","offer":"nvmesh-azure-205-001","sku":"nvmesh-plan-0001","version":"1.0.5"}},"networkProfile":{"networkInterfaces":[{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkInterfaces', concat('nvmesh2', 'NIC1'))]","primary":true}]},"osProfile":{"computerName":"nvmesh2","adminUsername":"excelero","linuxConfiguration":{"disablePasswordAuthentication":true,"ssh":{"publicKeys":[{"path":"[concat('/home/', 'excelero', '/.ssh/authorized_keys')]","keyData":"[parameters('adminPublicKey')]"}]}}},"diagnosticsProfile":{"bootDiagnostics":{"enabled":true}},"priority":"[if(parameters('useSpot'), 'Spot', json('null'))]","evictionPolicy":"[if(parameters('useSpot'), 'Deallocate', json('null'))]","billingProfile":{"maxPrice":"[if(parameters('useSpot'), -1, json('null'))]"},"proximityPlacementGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Compute/proximityPlacementGroups', parameters('proximityPlacementGroupName'))]"}},"apiVersion":"2020-06-01","location":"[resourceGroup().location]","plan":{"name":"nvmesh-plan-0001","product":"nvmesh-azure-205-001","publisher":"excelero1608461290726"},"zones":["[parameters('availabilityZone')]"]},{"name":"[concat('nvmesh2', 'NIC1')]","type":"Microsoft.Network/networkInterfaces","dependsOn":["[concat('Microsoft.Network/networkSecurityGroups/', 'nvmeshNSG')]","[concat('Microsoft.Network/virtualNetworks/', parameters('virtualNetworkName'))]","[concat('Microsoft.Network/publicIpAddresses/', concat(concat('nvmesh2', 'NIC1'), 'PublicIP1'))]"],"properties":{"ipConfigurations":[{"name":"ipconfig1","properties":{"subnet":{"id":"[concat(resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName')), '/subnets/', parameters('subnetName'))]"},"privateIPAllocationMethod":"Dynamic","publicIpAddress":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/publicIpAddresses', concat(concat('nvmesh2', 'NIC1'), 'PublicIP1'))]"}}}],"networkSecurityGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkSecurityGroups', 'nvmeshNSG')]"}},"apiVersion":"2018-10-01","location":"[resourceGroup().location]"},{"name":"[concat(concat('nvmesh2', 'NIC1'), 'PublicIP1')]","type":"Microsoft.Network/publicIpAddresses","dependsOn":[],"properties":{"publicIpAllocationMethod":"Dynamic"},"apiVersion":"2019-02-01","location":"[resourceGroup().location]","sku":{"name":"Basic"},"zones":["[parameters('availabilityZone')]"]},{"name":"nvmesh2/config1","type":"Microsoft.Compute/virtualMachines/extensions","dependsOn":["[concat('Microsoft.Compute/virtualMachines/', 'nvmesh2')]"],"properties":{"publisher":"Microsoft.Azure.Extensions","type":"CustomScript","typeHandlerVersion":"2.0","autoUpgradeMinorVersion":true,"settings":{"skipDos2Unix":true,"script":"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\n"}},"apiVersion":"2015-06-15","location":"[resourceGroup().location]"},{"name":"nvmesh3","type":"Microsoft.Compute/virtualMachines","dependsOn":["[resourceId('Microsoft.Network/privateDnsZones/virtualNetworkLinks/', 'excelero.com', 'excelero.com-link')]","[concat('Microsoft.Compute/proximityPlacementGroups/', parameters('proximityPlacementGroupName'))]","[concat('nvmesh3', 'NIC1')]"],"properties":{"hardwareProfile":{"vmSize":"Standard_A2_v2"},"storageProfile":{"osDisk":{"createOption":"fromImage","managedDisk":{"storageAccountType":"StandardSSD_LRS"}},"imageReference":{"publisher":"excelero1608461290726","offer":"nvmesh-azure-205-001","sku":"nvmesh-plan-0001","version":"1.0.5"}},"networkProfile":{"networkInterfaces":[{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkInterfaces', concat('nvmesh3', 'NIC1'))]","primary":true}]},"osProfile":{"computerName":"nvmesh3","adminUsername":"excelero","linuxConfiguration":{"disablePasswordAuthentication":true,"ssh":{"publicKeys":[{"path":"[concat('/home/', 'excelero', '/.ssh/authorized_keys')]","keyData":"[parameters('adminPublicKey')]"}]}}},"diagnosticsProfile":{"bootDiagnostics":{"enabled":true}},"priority":"[if(parameters('useSpot'), 'Spot', json('null'))]","evictionPolicy":"[if(parameters('useSpot'), 'Deallocate', json('null'))]","billingProfile":{"maxPrice":"[if(parameters('useSpot'), -1, json('null'))]"},"proximityPlacementGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Compute/proximityPlacementGroups', parameters('proximityPlacementGroupName'))]"}},"apiVersion":"2020-06-01","location":"[resourceGroup().location]","plan":{"name":"nvmesh-plan-0001","product":"nvmesh-azure-205-001","publisher":"excelero1608461290726"},"zones":["[parameters('availabilityZone')]"]},{"name":"[concat('nvmesh3', 'NIC1')]","type":"Microsoft.Network/networkInterfaces","dependsOn":["[concat('Microsoft.Network/networkSecurityGroups/', 'nvmeshNSG')]","[concat('Microsoft.Network/virtualNetworks/', parameters('virtualNetworkName'))]","[concat('Microsoft.Network/publicIpAddresses/', concat(concat('nvmesh3', 'NIC1'), 'PublicIP1'))]"],"properties":{"ipConfigurations":[{"name":"ipconfig1","properties":{"subnet":{"id":"[concat(resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName')), '/subnets/', parameters('subnetName'))]"},"privateIPAllocationMethod":"Dynamic","publicIpAddress":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/publicIpAddresses', concat(concat('nvmesh3', 'NIC1'), 'PublicIP1'))]"}}}],"networkSecurityGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkSecurityGroups', 'nvmeshNSG')]"}},"apiVersion":"2018-10-01","location":"[resourceGroup().location]"},{"name":"[concat(concat('nvmesh3', 'NIC1'), 'PublicIP1')]","type":"Microsoft.Network/publicIpAddresses","dependsOn":[],"properties":{"publicIpAllocationMethod":"Dynamic"},"apiVersion":"2019-02-01","location":"[resourceGroup().location]","sku":{"name":"Basic"},"zones":["[parameters('availabilityZone')]"]},{"name":"nvmesh3/config1","type":"Microsoft.Compute/virtualMachines/extensions","dependsOn":["[concat('Microsoft.Compute/virtualMachines/', 'nvmesh3')]"],"properties":{"publisher":"Microsoft.Azure.Extensions","type":"CustomScript","typeHandlerVersion":"2.0","autoUpgradeMinorVersion":true,"settings":{"skipDos2Unix":true,"script":"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\n"}},"apiVersion":"2015-06-15","location":"[resourceGroup().location]"}],"outputs":{"Native Volume: nativeVolume":{"type":"string","value":"/dev/nvmesh/nativeVolume"},"NVMeoF Volume: NVMeoFVolume on nvmesh1":{"type":"string","value":"nvme discover -a nvmesh1 -s 4420 && nvme connect -s 4420 -a nvmesh1-n \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh1\"-q \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh1\" ;"},"NVMeoF Volume: NVMeoFVolume on nvmesh2":{"type":"string","value":"nvme discover -a nvmesh2 -s 4420 && nvme connect -s 4420 -a nvmesh2-n \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh2\"-q \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh2\" ;"},"NVMeoF Volume: NVMeoFVolume on nvmesh3":{"type":"string","value":"nvme discover -a nvmesh3 -s 4420 && nvme connect -s 4420 -a nvmesh3-n \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh3\"-q \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh3\" ;"},"iSCSI Volume: iSCSIVolume on nvmesh1":{"type":"string","value":"iscsiadm --mode discoverydb --type sendtargets --portal nvmesh1 --discover && iscsiadm --mode node --targetname TBD --portal nvmesh1:3260 --login"},"iSCSI Volume: iSCSIVolume on nvmesh2":{"type":"string","value":"iscsiadm --mode discoverydb --type sendtargets --portal nvmesh2 --discover && iscsiadm --mode node --targetname TBD --portal nvmesh2:3260 --login"},"iSCSI Volume: iSCSIVolume on nvmesh3":{"type":"string","value":"iscsiadm --mode discoverydb --type sendtargets --portal nvmesh3 --discover && iscsiadm --mode node --targetname TBD --portal nvmesh3:3260 --login"},"NFS Volume: NFSVolume on nvmesh1":{"type":"string","value":"mount -t nfs nvmesh1:/bar /foo/bar"},"NFS Volume: NFSVolume on nvmesh2":{"type":"string","value":"mount -t nfs nvmesh2:/bar /foo/bar"},"NFS Volume: NFSVolume on nvmesh3":{"type":"string","value":"mount -t nfs nvmesh3:/bar /foo/bar"}}}
