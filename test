{"$schema":"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"subnetName":{"type":"string","defaultValue":"portalSN"},"virtualNetworkName":{"type":"string","defaultValue":"portalVN"},"addressPrefix":{"type":"string","defaultValue":"10.0.3.0/24"},"adminPublicKey":{"type":"secureString"},"useSpot":{"type":"bool","defaultValue":true},"proximityPlacementGroupName":{"type":"string","defaultValue":"portalPPG"},"availabilityZone":{"type":"string","allowedValues":["1","2","3"],"defaultValue":"1"}},"variables":{"nsgId":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkSecurityGroups', 'convergedNSG')]","vnetId":"[resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName'))]","subnetRef":"[concat(variables('vnetId'), '/subnets/', parameters('subnetName'))]"},"resources":[{"name":"excelero.com","type":"Microsoft.Network/privateDnsZones","apiVersion":"2020-01-01","location":"global"},{"name":"[parameters('virtualNetworkName')]","type":"Microsoft.Network/virtualNetworks","properties":{"addressSpace":{"addressPrefixes":["[parameters('addressPrefix')]"]},"subnets":[{"name":"[parameters('subnetName')]","properties":{"addressPrefix":"[parameters('addressPrefix')]"}}]},"apiVersion":"2019-09-01","location":"[resourceGroup().location]"},{"name":"excelero.com/excelero.com-link","type":"Microsoft.Network/privateDnsZones/virtualNetworkLinks","dependsOn":["[resourceId(resourceGroup().name, 'Microsoft.Network/privateDnsZones', 'excelero.com')]","[resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName'))]"],"properties":{"registrationEnabled":true,"virtualNetwork":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName'))]"}},"apiVersion":"2020-01-01","location":"global"},{"name":"nvmeshNSG","type":"Microsoft.Network/networkSecurityGroups","properties":{"securityRules":[{"name":"management","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"4001-4006","priority":1010}},{"name":"managementGUI","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"*","destinationPortRange":"4000","priority":1020}},{"name":"iwarp","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"7914-7978","priority":1030}},{"name":"mongo","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"27017","priority":1040}},{"name":"SSH","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"*","destinationPortRange":"22","priority":1050}},{"name":"zookeeperConnect","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"2181","priority":1060}},{"name":"zookeeperInternal1","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"2888","priority":1070}},{"name":"zookeeperInternal2","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"3888","priority":1080}},{"name":"kafka","properties":{"protocol":"TCP","access":"Allow","direction":"Inbound","sourceApplicationSecurityGroups":[],"destinationApplicationSecurityGroups":[],"sourcePortRange":"*","destinationAddressPrefix":"*","sourceAddressPrefix":"[parameters('addressPrefix')]","destinationPortRange":"9092","priority":1090}}]},"apiVersion":"2019-02-01","location":"[resourceGroup().location]"},{"name":"[concat(parameters('virtualNetworkName'), '/', parameters('subnetName'))]","type":"Microsoft.Network/virtualNetworks/subnets","dependsOn":["[parameters('virtualNetworkName')]"],"properties":{"addressPrefix":"[parameters('addressPrefix')]"},"apiVersion":"2019-06-01","location":"[resourceGroup().location]"},{"name":"[parameters('proximityPlacementGroupName')]","type":"Microsoft.Compute/proximityPlacementGroups","apiVersion":"2018-04-01","location":"[resourceGroup().location]"},{"name":"nvmesh1","type":"Microsoft.Compute/virtualMachines","dependsOn":["[resourceId('Microsoft.Network/privateDnsZones/virtualNetworkLinks/', 'excelero.com', 'excelero.com-link')]","[concat('Microsoft.Compute/proximityPlacementGroups/', parameters('proximityPlacementGroupName'))]","[concat('nvmesh1', 'NIC1')]"],"properties":{"hardwareProfile":{"vmSize":"Standard_L8s_v2"},"storageProfile":{"osDisk":{"createOption":"fromImage","managedDisk":{"storageAccountType":"StandardSSD_LRS"}},"imageReference":{"publisher":"excelero1608461290726","offer":"nvmesh-azure-205-001","sku":"nvmesh-plan-0001","version":"1.0.5"}},"networkProfile":{"networkInterfaces":[{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkInterfaces', concat('nvmesh1', 'NIC1'))]","primary":true}]},"osProfile":{"computerName":"nvmesh1","adminUsername":"excelero","linuxConfiguration":{"disablePasswordAuthentication":true,"ssh":{"publicKeys":[{"path":"[concat('/home/', 'excelero', '/.ssh/authorized_keys')]","keyData":"[parameters('adminPublicKey')]"}]}}},"diagnosticsProfile":{"bootDiagnostics":{"enabled":true}},"priority":"[if(parameters('useSpot'), 'Spot', json('null'))]","evictionPolicy":"[if(parameters('useSpot'), 'Deallocate', json('null'))]","billingProfile":{"maxPrice":"[if(parameters('useSpot'), -1, json('null'))]"},"proximityPlacementGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Compute/proximityPlacementGroups', parameters('proximityPlacementGroupName'))]"}},"apiVersion":"2020-06-01","location":"[resourceGroup().location]","plan":{"name":"nvmesh-plan-0001","product":"nvmesh-azure-205-001","publisher":"excelero1608461290726"},"zones":["[parameters('availabilityZone')]"]},{"name":"[concat('nvmesh1', 'NIC1')]","type":"Microsoft.Network/networkInterfaces","dependsOn":["[concat('Microsoft.Network/networkSecurityGroups/', 'nvmeshNSG')]","[concat('Microsoft.Network/virtualNetworks/', parameters('virtualNetworkName'))]","[concat('Microsoft.Network/publicIpAddresses/', concat(concat('nvmesh1', 'NIC1'), 'PublicIP1'))]"],"properties":{"ipConfigurations":[{"name":"ipconfig1","properties":{"subnet":{"id":"[concat(resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName')), '/subnets/', parameters('subnetName'))]"},"privateIPAllocationMethod":"Dynamic","publicIpAddress":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/publicIpAddresses', concat(concat('nvmesh1', 'NIC1'), 'PublicIP1'))]"}}}],"networkSecurityGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkSecurityGroups', 'nvmeshNSG')]"}},"apiVersion":"2018-10-01","location":"[resourceGroup().location]"},{"name":"[concat(concat('nvmesh1', 'NIC1'), 'PublicIP1')]","type":"Microsoft.Network/publicIpAddresses","dependsOn":[],"properties":{"publicIpAllocationMethod":"Dynamic"},"apiVersion":"2019-02-01","location":"[resourceGroup().location]","sku":{"name":"Basic"},"zones":["[parameters('availabilityZone')]"]},{"name":"nvmesh1/config1","type":"Microsoft.Compute/virtualMachines/extensions","dependsOn":["[concat('Microsoft.Compute/virtualMachines/', 'nvmesh1')]"],"properties":{"publisher":"Microsoft.Azure.Extensions","type":"CustomScript","typeHandlerVersion":"2.0","autoUpgradeMinorVersion":true,"settings":{"skipDos2Unix":true,"script":"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\n"}},"apiVersion":"2015-06-15","location":"[resourceGroup().location]"},{"name":"nvmesh2","type":"Microsoft.Compute/virtualMachines","dependsOn":["[resourceId('Microsoft.Network/privateDnsZones/virtualNetworkLinks/', 'excelero.com', 'excelero.com-link')]","[concat('Microsoft.Compute/proximityPlacementGroups/', parameters('proximityPlacementGroupName'))]","[concat('nvmesh2', 'NIC1')]"],"properties":{"hardwareProfile":{"vmSize":"Standard_L8s_v2"},"storageProfile":{"osDisk":{"createOption":"fromImage","managedDisk":{"storageAccountType":"StandardSSD_LRS"}},"imageReference":{"publisher":"excelero1608461290726","offer":"nvmesh-azure-205-001","sku":"nvmesh-plan-0001","version":"1.0.5"}},"networkProfile":{"networkInterfaces":[{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkInterfaces', concat('nvmesh2', 'NIC1'))]","primary":true}]},"osProfile":{"computerName":"nvmesh2","adminUsername":"excelero","linuxConfiguration":{"disablePasswordAuthentication":true,"ssh":{"publicKeys":[{"path":"[concat('/home/', 'excelero', '/.ssh/authorized_keys')]","keyData":"[parameters('adminPublicKey')]"}]}}},"diagnosticsProfile":{"bootDiagnostics":{"enabled":true}},"priority":"[if(parameters('useSpot'), 'Spot', json('null'))]","evictionPolicy":"[if(parameters('useSpot'), 'Deallocate', json('null'))]","billingProfile":{"maxPrice":"[if(parameters('useSpot'), -1, json('null'))]"},"proximityPlacementGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Compute/proximityPlacementGroups', parameters('proximityPlacementGroupName'))]"}},"apiVersion":"2020-06-01","location":"[resourceGroup().location]","plan":{"name":"nvmesh-plan-0001","product":"nvmesh-azure-205-001","publisher":"excelero1608461290726"},"zones":["[parameters('availabilityZone')]"]},{"name":"[concat('nvmesh2', 'NIC1')]","type":"Microsoft.Network/networkInterfaces","dependsOn":["[concat('Microsoft.Network/networkSecurityGroups/', 'nvmeshNSG')]","[concat('Microsoft.Network/virtualNetworks/', parameters('virtualNetworkName'))]","[concat('Microsoft.Network/publicIpAddresses/', concat(concat('nvmesh2', 'NIC1'), 'PublicIP1'))]"],"properties":{"ipConfigurations":[{"name":"ipconfig1","properties":{"subnet":{"id":"[concat(resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName')), '/subnets/', parameters('subnetName'))]"},"privateIPAllocationMethod":"Dynamic","publicIpAddress":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/publicIpAddresses', concat(concat('nvmesh2', 'NIC1'), 'PublicIP1'))]"}}}],"networkSecurityGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkSecurityGroups', 'nvmeshNSG')]"}},"apiVersion":"2018-10-01","location":"[resourceGroup().location]"},{"name":"[concat(concat('nvmesh2', 'NIC1'), 'PublicIP1')]","type":"Microsoft.Network/publicIpAddresses","dependsOn":[],"properties":{"publicIpAllocationMethod":"Dynamic"},"apiVersion":"2019-02-01","location":"[resourceGroup().location]","sku":{"name":"Basic"},"zones":["[parameters('availabilityZone')]"]},{"name":"nvmesh2/config1","type":"Microsoft.Compute/virtualMachines/extensions","dependsOn":["[concat('Microsoft.Compute/virtualMachines/', 'nvmesh2')]"],"properties":{"publisher":"Microsoft.Azure.Extensions","type":"CustomScript","typeHandlerVersion":"2.0","autoUpgradeMinorVersion":true,"settings":{"skipDos2Unix":true,"script":"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\n"}},"apiVersion":"2015-06-15","location":"[resourceGroup().location]"},{"name":"nvmesh3","type":"Microsoft.Compute/virtualMachines","dependsOn":["[resourceId('Microsoft.Network/privateDnsZones/virtualNetworkLinks/', 'excelero.com', 'excelero.com-link')]","[concat('Microsoft.Compute/proximityPlacementGroups/', parameters('proximityPlacementGroupName'))]","[concat('nvmesh3', 'NIC1')]"],"properties":{"hardwareProfile":{"vmSize":"Standard_A2_v2"},"storageProfile":{"osDisk":{"createOption":"fromImage","managedDisk":{"storageAccountType":"StandardSSD_LRS"}},"imageReference":{"publisher":"excelero1608461290726","offer":"nvmesh-azure-205-001","sku":"nvmesh-plan-0001","version":"1.0.5"}},"networkProfile":{"networkInterfaces":[{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkInterfaces', concat('nvmesh3', 'NIC1'))]","primary":true}]},"osProfile":{"computerName":"nvmesh3","adminUsername":"excelero","linuxConfiguration":{"disablePasswordAuthentication":true,"ssh":{"publicKeys":[{"path":"[concat('/home/', 'excelero', '/.ssh/authorized_keys')]","keyData":"[parameters('adminPublicKey')]"}]}}},"diagnosticsProfile":{"bootDiagnostics":{"enabled":true}},"priority":"[if(parameters('useSpot'), 'Spot', json('null'))]","evictionPolicy":"[if(parameters('useSpot'), 'Deallocate', json('null'))]","billingProfile":{"maxPrice":"[if(parameters('useSpot'), -1, json('null'))]"},"proximityPlacementGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Compute/proximityPlacementGroups', parameters('proximityPlacementGroupName'))]"}},"apiVersion":"2020-06-01","location":"[resourceGroup().location]","plan":{"name":"nvmesh-plan-0001","product":"nvmesh-azure-205-001","publisher":"excelero1608461290726"},"zones":["[parameters('availabilityZone')]"]},{"name":"[concat('nvmesh3', 'NIC1')]","type":"Microsoft.Network/networkInterfaces","dependsOn":["[concat('Microsoft.Network/networkSecurityGroups/', 'nvmeshNSG')]","[concat('Microsoft.Network/virtualNetworks/', parameters('virtualNetworkName'))]","[concat('Microsoft.Network/publicIpAddresses/', concat(concat('nvmesh3', 'NIC1'), 'PublicIP1'))]"],"properties":{"ipConfigurations":[{"name":"ipconfig1","properties":{"subnet":{"id":"[concat(resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', parameters('virtualNetworkName')), '/subnets/', parameters('subnetName'))]"},"privateIPAllocationMethod":"Dynamic","publicIpAddress":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/publicIpAddresses', concat(concat('nvmesh3', 'NIC1'), 'PublicIP1'))]"}}}],"networkSecurityGroup":{"id":"[resourceId(resourceGroup().name, 'Microsoft.Network/networkSecurityGroups', 'nvmeshNSG')]"}},"apiVersion":"2018-10-01","location":"[resourceGroup().location]"},{"name":"[concat(concat('nvmesh3', 'NIC1'), 'PublicIP1')]","type":"Microsoft.Network/publicIpAddresses","dependsOn":[],"properties":{"publicIpAllocationMethod":"Dynamic"},"apiVersion":"2019-02-01","location":"[resourceGroup().location]","sku":{"name":"Basic"},"zones":["[parameters('availabilityZone')]"]},{"name":"nvmesh3/config1","type":"Microsoft.Compute/virtualMachines/extensions","dependsOn":["[concat('Microsoft.Compute/virtualMachines/', 'nvmesh3')]"],"properties":{"publisher":"Microsoft.Azure.Extensions","type":"CustomScript","typeHandlerVersion":"2.0","autoUpgradeMinorVersion":true,"settings":{"skipDos2Unix":true,"script":"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\n"}},"apiVersion":"2015-06-15","location":"[resourceGroup().location]"}],"outputs":{"Native Volume: nativeVolume":{"type":"string","value":"/dev/nvmesh/nativeVolume"},"NVMeoF Volume: NVMeoFVolume on nvmesh1":{"type":"string","value":"nvme discover -a nvmesh1 -s 4420 && nvme connect -s 4420 -a nvmesh1-n \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh1\"-q \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh1\" ;"},"NVMeoF Volume: NVMeoFVolume on nvmesh2":{"type":"string","value":"nvme discover -a nvmesh2 -s 4420 && nvme connect -s 4420 -a nvmesh2-n \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh2\"-q \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh2\" ;"},"NVMeoF Volume: NVMeoFVolume on nvmesh3":{"type":"string","value":"nvme discover -a nvmesh3 -s 4420 && nvme connect -s 4420 -a nvmesh3-n \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh3\"-q \"nqn.2016-06.io.spdk:NVMeoFVolume.nvmesh3\" ;"},"iSCSI Volume: iSCSIVolume on nvmesh1":{"type":"string","value":"iscsiadm --mode discoverydb --type sendtargets --portal nvmesh1 --discover && iscsiadm --mode node --targetname TBD --portal nvmesh1:3260 --login"},"iSCSI Volume: iSCSIVolume on nvmesh2":{"type":"string","value":"iscsiadm --mode discoverydb --type sendtargets --portal nvmesh2 --discover && iscsiadm --mode node --targetname TBD --portal nvmesh2:3260 --login"},"iSCSI Volume: iSCSIVolume on nvmesh3":{"type":"string","value":"iscsiadm --mode discoverydb --type sendtargets --portal nvmesh3 --discover && iscsiadm --mode node --targetname TBD --portal nvmesh3:3260 --login"},"NFS Volume: NFSVolume on nvmesh1":{"type":"string","value":"mount -t nfs nvmesh1:/bar /foo/bar"},"NFS Volume: NFSVolume on nvmesh2":{"type":"string","value":"mount -t nfs nvmesh2:/bar /foo/bar"},"NFS Volume: NFSVolume on nvmesh3":{"type":"string","value":"mount -t nfs nvmesh3:/bar /foo/bar"}}}
